<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.financial.dao.ProfileDao">
  <!-- 查询所有收益信息 -->
	<select id="getProfileInfo" resultType="com.financial.entity.ProfileInfo">
		select * from profile
	</select>
	
	<!--查询昨日收益-->
	<select id="getyesterdayMoney" resultType="java.lang.Double">
		select profile_yesterday from profile
	</select>
	<!-- 查询产品总收益 -->
	<select id="getprofileMoney" resultType="java.lang.Double">
		select profile_money from profile
	</select>
	
	<!-- 插入收益 -->
	<insert id="insertProfileInfo" parameterType="com.financial.entity.ProfileInfo" keyProperty="id">
		insert into profile(profile_pro_id,profile_pro_name,buy_money
		profile_yesterday,profile_money,flag) 
		values
		(#{profileProId},#{profileProName},#{buyMoney}
		#{profileYesterday},#{profileMoney},#{flag})
	</insert>
	
	<!-- 批量更新收益 -->
	<update id="updateProfileBatch" parameterType="java.util.List">
	 update profile
	  <trim prefix="set" suffixOverrides=",">
             <trim prefix="profile_yesterday=case" suffix="end,">
                 <foreach collection="list" item="item" index="index">
                      when profile_id=#{item.profile_id} then #{item.profile_yesterday}  
                 </foreach>
              </trim>
              <trim prefix="profile_money=case" suffix="end,">
                 <foreach collection="list" item="item" index="index">
                      when profile_id=#{item.profile_id} then #{item.profile_money}
                 </foreach>
              </trim>
      </trim>
	 where profile_id in
	 <foreach collection="list" index="index" item="item" separator="," open="(" close=")">
	 	#{item.profile_id}
	 </foreach>
	 
	
	</update>
	
	
</mapper>